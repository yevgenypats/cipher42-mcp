{
  "openapi": "3.0.0",
  "info": {
    "title": "Cipher42 API Documentation",
    "version": "1.0.0",
    "description": "Cipher42 API Documentation"
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "servers": [
    {
      "url": "/api/v1",
      "description": "Cipher42 API V1 server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "path": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "message"
              ]
            }
          }
        },
        "required": [
          "message"
        ]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "$ref": "#/components/schemas/Error"
          }
        },
        "required": [
          "error"
        ]
      },
      "UUID": {
        "type": "string",
        "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "firstName": {
            "type": [
              "string",
              "null"
            ]
          },
          "lastName": {
            "type": [
              "string",
              "null"
            ]
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "firstName",
          "lastName",
          "email",
          "createdAt",
          "updatedAt"
        ]
      },
      "Organization": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "name": {
            "type": "string"
          },
          "tier": {
            "type": "string",
            "enum": [
              "free",
              "pro"
            ]
          },
          "trialEnd": {
            "type": [
              "string",
              "null"
            ]
          },
          "requestUpgrade": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "tier",
          "trialEnd",
          "requestUpgrade",
          "createdAt",
          "updatedAt"
        ]
      },
      "Member": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "organization": {
            "$ref": "#/components/schemas/Organization"
          },
          "user": {
            "$ref": "#/components/schemas/User"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "member"
            ]
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "userId",
          "organizationId",
          "organization",
          "user",
          "role",
          "createdAt",
          "updatedAt"
        ]
      },
      "Invitation": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "organizationId": {
            "$ref": "#/components/schemas/UUID"
          },
          "organization": {
            "$ref": "#/components/schemas/Organization"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "role": {
            "type": "string",
            "enum": [
              "admin",
              "member"
            ]
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "organizationId",
          "organization",
          "email",
          "role",
          "createdAt",
          "updatedAt"
        ]
      },
      "DatasourceBigQueryRedactedConfig": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "bigquery"
            ]
          },
          "projectId": {
            "type": "string",
            "minLength": 6,
            "maxLength": 30,
            "pattern": "^[a-z0-9-]+$",
            "description": "The project ID must contain only lowercase letters, numbers, and hyphens."
          }
        },
        "required": [
          "type",
          "projectId"
        ]
      },
      "DatasourceSnowflakeRedactedConfig": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "snowflake"
            ]
          },
          "account": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "warehouse": {
            "type": "string"
          }
        },
        "required": [
          "type",
          "account",
          "username",
          "warehouse"
        ]
      },
      "DatasourceRedactedConfig": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/DatasourceBigQueryRedactedConfig"
          },
          {
            "$ref": "#/components/schemas/DatasourceSnowflakeRedactedConfig"
          }
        ],
        "discriminator": {
          "propertyName": "type",
          "mapping": {
            "bigquery": "#/components/schemas/DatasourceBigQueryRedactedConfig",
            "snowflake": "#/components/schemas/DatasourceSnowflakeRedactedConfig"
          }
        }
      },
      "Datasource": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "name": {
            "type": "string"
          },
          "config": {
            "$ref": "#/components/schemas/DatasourceRedactedConfig"
          },
          "lastIndexTime": {
            "type": [
              "string",
              "null"
            ]
          },
          "lastIndexStart": {
            "type": [
              "string",
              "null"
            ]
          },
          "lastIndexError": {
            "type": [
              "string",
              "null"
            ]
          },
          "indexStartTime": {
            "type": [
              "string",
              "null"
            ]
          },
          "indexEndTime": {
            "type": [
              "string",
              "null"
            ]
          },
          "indexStatus": {
            "type": [
              "string",
              "null"
            ],
            "enum": [
              "pending",
              "in_progress",
              "completed",
              "partial",
              "failed"
            ]
          },
          "indexError": {
            "type": [
              "string",
              "null"
            ]
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "config",
          "lastIndexTime",
          "lastIndexStart",
          "lastIndexError",
          "indexStartTime",
          "indexEndTime",
          "indexStatus",
          "indexError",
          "createdAt",
          "updatedAt"
        ]
      },
      "DatasourceBigQueryConfig": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "bigquery"
            ]
          },
          "projectId": {
            "type": "string",
            "minLength": 6,
            "maxLength": 30,
            "pattern": "^[a-z0-9-]+$",
            "description": "The project ID must contain only lowercase letters, numbers, and hyphens."
          },
          "serviceAccountJson": {
            "type": "object",
            "properties": {
              "client_email": {
                "type": "string",
                "format": "email"
              },
              "private_key": {
                "type": "string",
                "minLength": 1,
                "maxLength": 2000
              }
            },
            "required": [
              "client_email",
              "private_key"
            ],
            "description": "The service account JSON must be a valid JSON object."
          }
        },
        "required": [
          "type",
          "projectId",
          "serviceAccountJson"
        ]
      },
      "DatasourceSnowflakeConfig": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "snowflake"
            ]
          },
          "account": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "warehouse": {
            "type": "string"
          }
        },
        "required": [
          "type",
          "account",
          "username",
          "password",
          "warehouse"
        ]
      },
      "DatasourceConfig": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/DatasourceBigQueryConfig"
          },
          {
            "$ref": "#/components/schemas/DatasourceSnowflakeConfig"
          }
        ],
        "discriminator": {
          "propertyName": "type",
          "mapping": {
            "bigquery": "#/components/schemas/DatasourceBigQueryConfig",
            "snowflake": "#/components/schemas/DatasourceSnowflakeConfig"
          }
        }
      },
      "DatasourceUpdateConfig": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/DatasourceBigQueryConfig"
              },
              {
                "required": [
                  "type"
                ]
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/DatasourceSnowflakeConfig"
              },
              {
                "required": [
                  "type"
                ]
              }
            ]
          }
        ],
        "discriminator": {
          "propertyName": "type",
          "mapping": {
            "bigquery": "#/components/schemas/DatasourceBigQueryConfig",
            "snowflake": "#/components/schemas/DatasourceSnowflakeConfig"
          }
        }
      },
      "Meta": {
        "type": "object",
        "properties": {
          "total": {
            "type": "number"
          },
          "page": {
            "type": "number"
          },
          "limit": {
            "type": "number"
          },
          "totalPages": {
            "type": "number"
          },
          "hasNextPage": {
            "type": "boolean"
          },
          "hasPrevPage": {
            "type": "boolean"
          }
        },
        "required": [
          "total",
          "page",
          "limit",
          "totalPages",
          "hasNextPage",
          "hasPrevPage"
        ]
      },
      "QueryResult": {
        "type": "object",
        "properties": {
          "columns": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "type": {
                  "type": "string"
                }
              },
              "required": [
                "name",
                "type"
              ]
            }
          },
          "rows": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": {}
            }
          }
        },
        "required": [
          "columns",
          "rows"
        ]
      },
      "Schema": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "updatedAt"
        ]
      },
      "Table": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "columns": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "type": {
                  "type": "string"
                }
              },
              "required": [
                "name",
                "type"
              ]
            }
          },
          "metadata": {},
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "columns",
          "updatedAt"
        ]
      },
      "Chat": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "title",
          "createdAt",
          "updatedAt"
        ]
      },
      "Message": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "assistant"
            ]
          },
          "type": {
            "type": "string",
            "enum": [
              "text",
              "tool_use"
            ]
          },
          "content": {
            "type": "string",
            "maxLength": 1048576
          },
          "createdAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "role",
          "type",
          "content",
          "createdAt"
        ]
      },
      "MessageEventStart": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "message_event_start"
            ]
          },
          "data": {
            "$ref": "#/components/schemas/Message"
          }
        },
        "required": [
          "type",
          "data"
        ]
      },
      "MessageEventChunk": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "message_event_chunk"
            ]
          },
          "data": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "content": {
                "type": "string",
                "maxLength": 1048576
              }
            },
            "required": [
              "id",
              "content"
            ]
          }
        },
        "required": [
          "type",
          "data"
        ]
      },
      "MessageEventEnd": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "message_event_end"
            ]
          },
          "data": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "content": {
                "type": "string",
                "maxLength": 1048576
              }
            },
            "required": [
              "id",
              "content"
            ]
          }
        },
        "required": [
          "type",
          "data"
        ]
      },
      "MessageEvent": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/MessageEventStart"
          },
          {
            "$ref": "#/components/schemas/MessageEventChunk"
          },
          {
            "$ref": "#/components/schemas/MessageEventEnd"
          }
        ],
        "discriminator": {
          "propertyName": "type",
          "mapping": {
            "message_event_start": "#/components/schemas/MessageEventStart",
            "message_event_chunk": "#/components/schemas/MessageEventChunk",
            "message_event_end": "#/components/schemas/MessageEventEnd"
          }
        }
      },
      "Query": {
        "type": "object",
        "properties": {
          "id": {
            "$ref": "#/components/schemas/UUID"
          },
          "name": {
            "type": "string"
          },
          "text": {
            "type": "string"
          },
          "shared": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "text",
          "shared",
          "createdAt",
          "updatedAt"
        ]
      }
    },
    "parameters": {}
  },
  "paths": {
    "/users/current": {
      "get": {
        "summary": "Get current user",
        "description": "Get current user",
        "operationId": "getCurrentUser",
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/users/{userId}": {
      "get": {
        "summary": "Get user by ID",
        "description": "Get user by ID",
        "operationId": "getUserById",
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "post": {
        "summary": "Update user by ID",
        "description": "Update user by ID",
        "operationId": "updateUserById",
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": {
                    "type": "string",
                    "minLength": 2
                  },
                  "lastName": {
                    "type": "string",
                    "minLength": 2
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/users/{userId}/memberships": {
      "get": {
        "summary": "Get user memberships by ID",
        "description": "Get user memberships by ID",
        "operationId": "getUserMemebershipsById",
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Member"
                      }
                    }
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/users/{userId}/invitations": {
      "get": {
        "summary": "Get invitations for a user by ID",
        "description": "Get invitations for a user by ID",
        "operationId": "getUserInvitations",
        "tags": [
          "users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Invitation"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs": {
      "post": {
        "summary": "Create organization",
        "description": "Create organization",
        "operationId": "createOrg",
        "tags": [
          "organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 2
                  }
                },
                "required": [
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Organization"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}": {
      "get": {
        "summary": "Get organization by ID",
        "description": "Get organization by ID",
        "operationId": "getOrgById",
        "tags": [
          "organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Organization"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "post": {
        "summary": "Update organization by ID",
        "description": "Update organization by ID",
        "operationId": "updateOrgById",
        "tags": [
          "organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 2
                  },
                  "requestUpgrade": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Organization"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/members": {
      "get": {
        "summary": "Get organization members by ID",
        "description": "Get organization members by ID",
        "operationId": "getOrgMembers",
        "tags": [
          "organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Member"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/datasources": {
      "post": {
        "summary": "Create datasource",
        "description": "Create datasource",
        "operationId": "createDatasource",
        "tags": [
          "datasources"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 2
                  },
                  "config": {
                    "$ref": "#/components/schemas/DatasourceConfig"
                  }
                },
                "required": [
                  "name",
                  "config"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Datasource"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "get": {
        "summary": "Get datasources",
        "description": "Get datasources",
        "operationId": "getDatasources",
        "tags": [
          "datasources"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Datasource"
                      }
                    },
                    "meta": {
                      "$ref": "#/components/schemas/Meta"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/datasources/{datasourceId}": {
      "get": {
        "summary": "Get datasource by id",
        "description": "Get datasource by id",
        "operationId": "getDatasourceById",
        "tags": [
          "datasources"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "datasourceId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Datasource"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "delete": {
        "summary": "Delete datasource by id",
        "description": "Delete datasource by id",
        "operationId": "deleteDatasourceById",
        "tags": [
          "datasources"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "datasourceId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {}
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/datasources/{datasourceId}/query": {
      "post": {
        "summary": "Run query",
        "description": "Run query",
        "operationId": "runQuery",
        "tags": [
          "datasources"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "datasourceId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "query": {
                    "type": "string"
                  }
                },
                "required": [
                  "query"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/QueryResult"
                    },
                    "meta": {
                      "$ref": "#/components/schemas/Meta"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/datasources/{datasourceId}/schemas": {
      "get": {
        "summary": "Get schemas for a datasource",
        "description": "Get schemas for a datasource",
        "operationId": "getSchemas",
        "tags": [
          "tables"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "datasourceId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Schema"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/datasources/{datasourceId}/schemas/{schemaName}/tables": {
      "get": {
        "summary": "Get tables for a schema",
        "description": "Get tables for a schema",
        "operationId": "getTables",
        "tags": [
          "tables"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "datasourceId",
            "in": "path"
          },
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "schemaName",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Table"
                      }
                    },
                    "meta": {
                      "$ref": "#/components/schemas/Meta"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/chats": {
      "post": {
        "summary": "Create chat",
        "description": "Create chat",
        "operationId": "createChat",
        "tags": [
          "chats"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "context": {
                    "type": "object",
                    "properties": {
                      "datasourceId": {
                        "type": "string"
                      },
                      "schemaName": {
                        "type": "string"
                      }
                    }
                  }
                },
                "required": [
                  "title"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Chat"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "get": {
        "summary": "Get chats",
        "description": "Get chats",
        "operationId": "getChats",
        "tags": [
          "chats"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Chat"
                      }
                    },
                    "meta": {
                      "$ref": "#/components/schemas/Meta"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/chats/{chatId}": {
      "get": {
        "summary": "Get chat by id",
        "description": "Get chat by id",
        "operationId": "getChatById",
        "tags": [
          "chats"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "chatId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "allOf": [
                        {
                          "$ref": "#/components/schemas/Chat"
                        },
                        {
                          "type": "object",
                          "properties": {
                            "messages": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/Message"
                              }
                            }
                          },
                          "required": [
                            "messages"
                          ]
                        }
                      ]
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "delete": {
        "summary": "Delete chat",
        "description": "Delete chat",
        "operationId": "deleteChat",
        "tags": [
          "chats"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "chatId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {}
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/chats/{chatId}/messages": {
      "post": {
        "summary": "Create message",
        "description": "Create message",
        "operationId": "createMessage",
        "tags": [
          "chats"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "chatId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": {
                    "type": "string"
                  }
                },
                "required": [
                  "content"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Message"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/chats/{chatId}/stream": {
      "get": {
        "summary": "Get chat stream",
        "description": "Get chat stream",
        "operationId": "getChatStream",
        "tags": [
          "chats"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "chatId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/MessageEvent"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/code": {
      "post": {
        "summary": "Create code completion",
        "description": "Create code completion",
        "operationId": "createCodeCompletion",
        "tags": [
          "code"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code": {
                    "type": "string",
                    "maxLength": 1048576
                  },
                  "datasourceId": {
                    "type": "string"
                  },
                  "schemaName": {
                    "type": "string"
                  }
                },
                "required": [
                  "code",
                  "datasourceId",
                  "schemaName"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "completion": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "completion"
                      ]
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/queries": {
      "post": {
        "summary": "Create a new query",
        "description": "Create a new query",
        "operationId": "createQuery",
        "tags": [
          "queries"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "text": {
                    "type": "string"
                  },
                  "shared": {
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": [
                  "name",
                  "text"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Query"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "get": {
        "summary": "Get all queries for an organization",
        "description": "Get all queries for an organization",
        "operationId": "getQueries",
        "tags": [
          "queries"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Query"
                      }
                    },
                    "meta": {
                      "$ref": "#/components/schemas/Meta"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/queries/{queryId}": {
      "get": {
        "summary": "Get a specific query by ID",
        "description": "Get a specific query by ID",
        "operationId": "getQueryById",
        "tags": [
          "queries"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "queryId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Query"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "post": {
        "summary": "Update a query",
        "description": "Update a query",
        "operationId": "updateQuery",
        "tags": [
          "queries"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "queryId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "text": {
                    "type": "string"
                  },
                  "shared": {
                    "type": "boolean",
                    "default": false
                  }
                },
                "required": [
                  "name",
                  "text"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Query"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "delete": {
        "summary": "Delete a query",
        "description": "Delete a query",
        "operationId": "deleteQuery",
        "tags": [
          "queries"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "queryId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {}
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/invitations": {
      "get": {
        "summary": "Get all invitations for an organization",
        "description": "Get all invitations for an organization",
        "operationId": "getInvitations",
        "tags": [
          "invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Invitation"
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "post": {
        "summary": "Create a new invitation",
        "description": "Create a new invitation",
        "operationId": "createInvitation",
        "tags": [
          "invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "admin",
                      "member"
                    ],
                    "default": "member"
                  }
                },
                "required": [
                  "email"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Invitation"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/orgs/{orgId}/invitations/{invitationId}": {
      "get": {
        "summary": "Get a specific invitation by ID",
        "description": "Get a specific invitation by ID",
        "operationId": "getInvitation",
        "tags": [
          "invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Invitation"
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "delete": {
        "summary": "Delete an invitation by ID",
        "description": "Delete an invitation by ID",
        "operationId": "deleteInvitation",
        "tags": [
          "invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "orgId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {}
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/users/{userId}/invitations/{invitationId}/accept": {
      "post": {
        "summary": "Accept an invitation for a user",
        "description": "Accept an invitation for a user",
        "operationId": "acceptInvitation",
        "tags": [
          "invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {}
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    },
    "/users/{userId}/invitations/{invitationId}/reject": {
      "post": {
        "summary": "Reject an invitation for a user",
        "description": "Reject an invitation for a user",
        "operationId": "rejectInvitation",
        "tags": [
          "invitations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "userId",
            "in": "path"
          },
          {
            "schema": {
              "$ref": "#/components/schemas/UUID"
            },
            "required": true,
            "name": "invitationId",
            "in": "path"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {}
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      }
    }
  },
  "webhooks": {}
}